{"version":3,"sources":["reducers/notificationReducer.tsx","reducers/userReducer.tsx","utils/loginStorage.tsx","utils/authenticationHelper.tsx","services/userService.tsx","components/RegisterPage/index.tsx","services/loginService.tsx","reducers/loginReducer.tsx","reducers/videoReducer.tsx","reducers/produceReducer.ts","store.tsx","components/VideoEntries/entry.tsx","components/VideoEntries/entryTable.tsx","components/UserPage/index.tsx","services/videoService.tsx","components/SearchPage/index.tsx","components/VideoPage/index.tsx","components/LoginBar/index.tsx","services/produceService.tsx","components/AddProduce/index.tsx","components/AddVideoPage/index.tsx","components/NotificationBar/index.tsx","App.tsx","index.tsx"],"names":["loginSlice","createSlice","name","initialState","notifications","reducers","removeNotification","state","slice","addNotification","action","notification","payload","concat","actions","usersSlice","users","setUser","user","id","loggedKey","localStorage","setItem","JSON","stringify","getItem","parse","removeItem","loginStorage","headers","Authorization","token","baseUrl","addUser","newUser","a","axios","post","res","data","getUser","get","addFavourite","userid","videoid","authenticationHelper","removeFavourite","delete","RegisterPage","useState","username","setUsername","password","setPassword","passwordAgain","setPasswordAgain","matching","setMatching","notEmpty","setNotEmpty","useEffect","dispatch","useDispatch","showNotification","message","error","setTimeout","submitRegistration","userService","result","document","getElementById","value","response","submit","event","preventDefault","className","onSubmit","onChange","target","type","disabled","login","createAsyncThunk","credentials","thunkAPI","loginService","logout","loadUser","videosSlice","videos","setVideos","reduce","memo","video","produceSlice","produce","setProduce","length","pro","rootReducer","combineReducers","userReducer","loginReducer","videoReducer","produceReducer","notificationReducer","store","configureStore","reducer","useAppDispatch","VideoEntry","history","useHistory","onClick","push","videoName","channelName","href","videoUrl","title","len","ingredients","sortedIng","sort","b","pricePerGram","quantity","compareIngredients","max","mostUsedIngredients","map","ing","produceName","calories","forEach","i","caloriesPerGram","price","timeInMinutes","vegetarian","favourites","clicks","Date","Number","added","toDateString","EntryTable","UserPage","useParams","addedSelected","setAddedSelected","useSelector","waitDispatch","favouriteVideos","addVideo","newVideo","addClick","put","addIngredient","newIngredients","getVideos","parameters","ids","minClicks","maxClicks","minFavourites","maxFavourites","SearchPage","field","setField","searchList","setSearchList","search","setSearch","videoService","completeSearch","s","toLowerCase","placeholder","Math","random","isInteger","addSearch","filter","l","Object","values","VideoPage","loginId","isFavourite","v","idQuery","fetchVideos","fetchUser","e","addToFavourites","userResult","videoResult","removeFromFavourites","LoginBar","submitLogin","logUser","addProduce","newProduce","getProduce","AddProduce","setName","setCalories","setPrice","suitableValues","Boolean","isFinite","submitProduce","produceService","Error","min","style","color","AddVideoPage","openAdd","setOpenAdd","link","setLink","linkError","setLinkError","time","setTime","grams","setGrams","setIngredients","minutesError","setMinutesError","gramsError","setGramsError","setVegetarian","undefined","ingPro","setIngPro","waitForDispatch","startsWith","userId","now","produceId","videoId","checked","step","defaultValue","p","includes","ingredient","submitIngredient","NotificationBar","n","index","App","path","render","exact","from","to","ReactDOM"],"mappings":"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","file":"static/js/main.fb37e793.chunk.js","sourcesContent":["import { createSlice, PayloadAction } from \"@reduxjs/toolkit\"\r\n\r\nconst initialState: NotificationState = {notifications: []}\r\n\r\nconst loginSlice = createSlice({\r\n    name: 'notifications',\r\n    initialState,\r\n    reducers: {\r\n        removeNotification(state) {\r\n            return {...state, notifications: state.notifications.slice(1)}\r\n        },\r\n        addNotification(state, action: PayloadAction<Notification>) {\r\n            const notification = action.payload\r\n            return {...state, notifications: state.notifications.concat(notification)}\r\n        }\r\n    }\r\n})\r\n\r\nexport const { removeNotification, addNotification } = loginSlice.actions\r\n\r\nexport interface Notification {\r\n    message: string,\r\n    error: boolean\r\n}\r\nexport interface NotificationState {\r\n    notifications: Notification[]\r\n}\r\n\r\nexport default loginSlice.reducer","\r\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit'\r\nimport { User } from '../types'\r\n\r\nconst initialState: UserState = {users: {}}\r\n\r\nconst usersSlice = createSlice({\r\n    name: 'users',\r\n    initialState,\r\n    reducers: {\r\n        setUser(state, action: PayloadAction<User>) {\r\n            const user: User = action.payload\r\n            return {...state, users: {...state.users, [user.id]: {...user}}}\r\n            }\r\n    }\r\n})\r\n\r\nexport const {setUser} = usersSlice.actions\r\nexport interface UserState {\r\n    users: { [id: number]: User },\r\n}\r\n\r\nexport default usersSlice.reducer","import { LoggedInUser } from \"../types\"\r\n\r\nconst loggedKey = \"LoggedUser\"\r\n\r\nconst saveUser = (user: LoggedInUser) => {\r\n    localStorage.setItem(loggedKey, JSON.stringify(user));\r\n}\r\n\r\nconst loadUser = (): LoggedInUser | null => {\r\n    const user = localStorage.getItem(loggedKey);\r\n    if(!user) {\r\n        return null;\r\n    }\r\n    return JSON.parse(user);\r\n}\r\n\r\nconst logoutUser = () => {\r\n    localStorage.removeItem(loggedKey);\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {\r\n    saveUser,\r\n    loadUser,\r\n    logoutUser\r\n}","import loginStorage from \"./loginStorage\"\r\n\r\nconst getAuthenticationHeaders = () => {\r\n    const user = loginStorage.loadUser()\r\n    if(!user) {\r\n        return {\r\n            headers: { Authorization: `bearer FalseToken`}\r\n        }\r\n    }\r\n    return {\r\n        headers: { Authorization: `bearer ${user.token}` }\r\n    }\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {\r\n    getAuthenticationHeaders\r\n}","import axios from 'axios'\r\nimport { NewUser, User } from \"../types\"\r\nimport authenticationHelper from '../utils/authenticationHelper'\r\n\r\nconst baseUrl = '/api/user'\r\n\r\nconst addUser = async (newUser: NewUser): Promise<User> => {\r\n    const res = await axios.post(baseUrl, newUser)\r\n    return res.data\r\n}\r\n\r\nconst getUser = async (id: User['id']): Promise<User> => {\r\n    const res = await axios.get(`${baseUrl}/${id}`)\r\n    return res.data;\r\n}\r\n\r\nconst addFavourite = async (userid: User['id'], videoid: User['id']) => {\r\n    await axios.post(`${baseUrl}/${userid}/favourite/${videoid}`,null, {headers: {Authorization: authenticationHelper.getAuthenticationHeaders().headers.Authorization}})\r\n}\r\n\r\nconst removeFavourite = async (userid: User['id'], videoid: User['id']) => {\r\n    await axios.delete(`${baseUrl}/${userid}/favourite/${videoid}`, {headers: {Authorization: authenticationHelper.getAuthenticationHeaders().headers.Authorization}})\r\n}\r\n\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { addUser, getUser, addFavourite, removeFavourite }","import React, { FormEvent, useEffect, useState } from 'react'\r\nimport { useDispatch } from 'react-redux'\r\nimport { addNotification, removeNotification } from '../../reducers/notificationReducer'\r\nimport { setUser } from '../../reducers/userReducer'\r\nimport userService from '../../services/userService'\r\nimport { NewUser } from '../../types'\r\n\r\nexport const RegisterPage: React.FC = () => {\r\n    const [username, setUsername] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const [passwordAgain, setPasswordAgain] = useState('')\r\n    const [matching, setMatching] = useState(true)\r\n    const [notEmpty, setNotEmpty] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if(password && passwordAgain && password !== passwordAgain) {\r\n            setNotEmpty(true)\r\n            setMatching(false)\r\n        } else if (!password || !passwordAgain) {\r\n            setNotEmpty(false)\r\n            setMatching(false)\r\n        } else {\r\n            setNotEmpty(true)\r\n            setMatching(true)\r\n        }\r\n    }, [passwordAgain, password])\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const showNotification = (message: string, error: boolean) => {\r\n        dispatch(addNotification({message, error}))\r\n        setTimeout(() => dispatch(removeNotification()), 2000)\r\n    }\r\n    \r\n    const submitRegistration = async (newUser: NewUser) => {\r\n        const {username, password} = newUser;\r\n        if(!username || !password) {\r\n            showNotification(\"All fields must be filled\", true)\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const result = await userService.addUser(newUser)\r\n\r\n            dispatch(setUser(result));\r\n\r\n            (document.getElementById('username-input') as HTMLInputElement).value = \"\";\r\n            (document.getElementById('password-input') as HTMLInputElement).value = \"\";\r\n            (document.getElementById('password-again-input') as HTMLInputElement).value = \"\";\r\n\r\n            setUsername(\"\")\r\n            setPassword(\"\")\r\n            setPasswordAgain(\"\")\r\n\r\n            showNotification(\"New user created! Welcome!\", false)\r\n        } catch (e) {\r\n            showNotification(e.response.data, true)\r\n        }\r\n    }\r\n\r\n    const submit= async (event: FormEvent<HTMLFormElement>) => {\r\n        event.preventDefault()\r\n        submitRegistration({username, password})\r\n    }\r\n    \r\n    return(\r\n        <div className=\"form-background center-text top-padding bottom-padding\">\r\n            <h1> Create new user:</h1>\r\n            <form onSubmit={submit}>\r\n                <div className=\"top-margin\">\r\n                    <div>\r\n                        <p>Username</p>\r\n                    </div>\r\n                    <div>\r\n                        <input className=\"text-input half\" id=\"username-input\" value={username} onChange={({target}) => setUsername(target.value)} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"top-margin\">\r\n                    <div>\r\n                        <p>Password</p>\r\n                    </div>\r\n                    <div>\r\n                        <input className=\"text-input half\" id=\"password-input\" type='password' value={password} onChange={({target}) => setPassword(target.value)} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"top-margin\">\r\n                    <div>\r\n                        <p>Password again</p>\r\n                    </div>\r\n                    <div>\r\n                        <input className=\"text-input half\" id=\"password-again-input\" type='password' value={passwordAgain} onChange={({target}) => setPasswordAgain(target.value)} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"top-margin\">\r\n                    {(!matching && notEmpty) && \r\n                        <div>\r\n                            <p>The passwords do not match!</p>\r\n                        </div>\r\n                    }\r\n                    <div className=\"top-margin\">\r\n                        <button className=\"add-button\" type='submit' disabled={!(matching && notEmpty)}>Create account!</button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n","import axios from 'axios'\r\nimport { LoggedInUser } from '../types'\r\n\r\nconst baseUrl = '/api/login'\r\n\r\nconst login = async (username: string, password: string): Promise<LoggedInUser> => {\r\n    const res = await axios.post(baseUrl, {username, password})\r\n    return res.data\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {\r\n    login\r\n}","import { createAsyncThunk, createSlice, PayloadAction } from \"@reduxjs/toolkit\"\r\nimport { LoggedInUser, NewUser } from \"../types\"\r\nimport loginService from '../services/loginService';\r\n\r\nconst initialState: LoginState = {user: null}\r\n\r\nexport const login = createAsyncThunk(\r\n    'login/login',\r\n    async(credentials: NewUser, thunkAPI) => {\r\n        const {username, password} = credentials\r\n        const response = await loginService.login(username, password);\r\n        return response\r\n    }\r\n)\r\n\r\nconst loginSlice = createSlice({\r\n    name: 'login',\r\n    initialState,\r\n    reducers: {\r\n        logout(state) {\r\n            return initialState\r\n        },\r\n        loadUser(state, action: PayloadAction<LoggedInUser>) {\r\n            const user = action.payload\r\n            return {...state, user}\r\n        }\r\n    }\r\n})\r\n\r\nexport const { logout, loadUser } = loginSlice.actions\r\n\r\nexport interface LoginState {\r\n    user: LoggedInUser | null\r\n}\r\n\r\nexport default loginSlice.reducer","\r\nimport { createSlice, PayloadAction} from '@reduxjs/toolkit'\r\nimport { Video} from '../types'\r\n\r\nconst initialState: VideoState = {videos: {}}\r\n\r\nconst videosSlice = createSlice({\r\n    name: 'videos',\r\n    initialState,\r\n    reducers: {\r\n        setVideos(state, action: PayloadAction<Video[]>) {\r\n            const videos: Video[] = action.payload\r\n            return {...state, videos: {...videos.reduce((memo, video: Video) => ({...memo, [video.id]: video}), {})}}\r\n            }\r\n    }\r\n})\r\n\r\nexport const {setVideos} = videosSlice.actions\r\n\r\nexport interface VideoState {\r\n    videos: { [id: number]: Video },\r\n}\r\n\r\nexport default videosSlice.reducer","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { Produce } from '../types';\r\n\r\nconst initialState: ProduceState = {produce: {}}\r\n\r\nconst produceSlice = createSlice({\r\n    name: 'produce',\r\n    initialState,\r\n    reducers: {\r\n        setProduce(state, action: PayloadAction<Produce[]>) {\r\n        const produce: Produce[] = action.payload\r\n        if(!action.payload || action.payload.length === 0) {\r\n            return state\r\n        }\r\n        return {...state, produce: {...state.produce, ...produce.reduce((memo, pro: Produce) => ({...memo, [pro.id]: pro}), {})}}\r\n        }\r\n    }\r\n})\r\n\r\n\r\nexport interface ProduceState {\r\n    produce: { [id: number]: Produce},\r\n}\r\n\r\nexport const { setProduce } = produceSlice.actions\r\nexport default produceSlice.reducer","import {combineReducers} from 'redux'\r\nimport userReducer from './reducers/userReducer'\r\nimport loginReducer from './reducers/loginReducer'\r\nimport videoReducer from './reducers/videoReducer'\r\nimport { configureStore } from '@reduxjs/toolkit'\r\nimport { useDispatch } from 'react-redux'\r\nimport produceReducer from './reducers/produceReducer'\r\nimport notificationReducer from './reducers/notificationReducer'\r\n\r\nexport const rootReducer = combineReducers({\r\n    users: userReducer,\r\n    login: loginReducer,\r\n    videos: videoReducer,\r\n    produce: produceReducer,\r\n    notifications: notificationReducer\r\n})\r\n\r\nconst store = configureStore({\r\n    reducer: rootReducer\r\n})\r\n\r\nexport default store\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>\r\n\r\n\r\nexport type AppDispatch = typeof store.dispatch\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>()","import React from 'react'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { Ingredient, Video } from '../../types'\r\n\r\n\r\nexport const VideoEntry: React.FC<{video: Video}> = ({video}) => {\r\n\r\n    const history = useHistory()\r\n    const compareIngredients = (a: Ingredient, b: Ingredient) => {\r\n        return (a.produce.pricePerGram * a.quantity) - (b.produce.pricePerGram * b.quantity)\r\n    }\r\n\r\n    const mostUsedIngredients = (): Ingredient[] => {\r\n        const len = video.ingredients.length\r\n        if(len <= 2) return video.ingredients\r\n        const sortedIng = video.ingredients.slice().sort((a, b) => compareIngredients(a, b))\r\n        const max = len > 3 ? 2 : sortedIng.length - 1\r\n        return sortedIng.slice(0, max)\r\n    }\r\n\r\n    const calories = (): Number => {\r\n        var calories = 0\r\n        video.ingredients.forEach((i: Ingredient) => calories += (i.produce.caloriesPerGram * i.quantity))\r\n        return calories\r\n    }\r\n    \r\n    const price = (): Number => {\r\n        var price = 0\r\n        video.ingredients.forEach((i: Ingredient) => price += (i.produce.pricePerGram * i.quantity))\r\n        return price/100\r\n    }\r\n\r\n    return (\r\n        <section className=\"grid-video-entry top-margin\">\r\n            <div className=\"bar lighter start-f start-m\"/>\r\n            <div className=\"bar bar-button lighter\">\r\n                <p onClick={() => history.push(`/video/${video.id}`)}>{video.videoName}</p>\r\n            </div>\r\n            <div className=\"bar\">\r\n                <p>{video.channelName}</p>\r\n            </div>\r\n            <div className=\"full-screen-only\">\r\n                <a href={video.videoUrl} title={video.videoUrl}>\r\n                    <div className=\"bar bar-button lighter full-screen-only\">\r\n                        <p>To video!</p>\r\n                    </div>\r\n                </a>\r\n            </div>\r\n            <div className=\"bar full-screen-only\">\r\n                <div>\r\n                    {mostUsedIngredients().map((ing: Ingredient) => {\r\n                        return <p key={ing.id}>{ing.produce.produceName}</p>\r\n                    })}\r\n                </div>\r\n            </div>\r\n            <div className=\"bar lighter\">\r\n                <p>{calories()}</p>\r\n            </div>\r\n            <div className=\"bar \">\r\n                <p>{price()}â‚¬</p>\r\n            </div>\r\n            <div className=\"bar lighter\">\r\n                <p>{video.timeInMinutes}</p>\r\n            </div>\r\n            <div className=\"bar full-screen-only\">\r\n                <p>{video.vegetarian ? \"Yes\" : \"No\"}</p>\r\n            </div>\r\n            <div className=\"bar lighter full-screen-only\">\r\n                <p>{video.favourites}</p>\r\n            </div>\r\n            <div className=\"bar full-screen-only\">\r\n                <p>{video.clicks}</p>\r\n            </div>\r\n            <div className=\"bar lighter full-screen-only\">\r\n                <p>{new Date(Number(video.added)).toDateString()}</p>\r\n            </div>\r\n            <div className=\"bar full-screen-only\">\r\n                <p>{video.username}</p>\r\n            </div>\r\n            <div className=\"bar end-f end-m lighter-m\"/>\r\n        </section>\r\n    )\r\n}","import React from 'react'\r\nimport { Video } from '../../types'\r\nimport { VideoEntry } from './entry'\r\n\r\n\r\nexport const EntryTable: React.FC<{videos: Video[]}> = ({videos}) => {\r\n    return (\r\n        <div>\r\n            <div className=\"form-background top-margin bottom-margin center-text\">\r\n                <p className=\"side-margin\">! Links are checked with YouTube API to be actual videos when submitted, but we can't know what they actually\r\n                    contain. If you wan't to be sure what you click, try searching on YouTube with the video title. !\r\n                </p>\r\n            </div>\r\n            <section className=\"grid-video-entry\">\r\n                <div className=\"bar lighter start-f start-m\"/>\r\n                <div className=\"bar lighter\">\r\n                    <p>Video: </p>\r\n                </div>\r\n                <div className=\"bar\">\r\n                    <p>Channel: </p>\r\n                </div>\r\n                <div className=\"bar lighter full-screen-only\">\r\n                    <p>Link: </p>\r\n                </div>\r\n                <div className=\"bar full-screen-only\">\r\n                    <p>Most used ingredients: </p>\r\n                </div>\r\n                <div className=\"bar lighter\">\r\n                    <p>Calories (approx.): </p>\r\n                </div>\r\n                <div className=\"bar\">\r\n                    <p>Price (approx.): </p>\r\n                </div>\r\n                <div className=\"bar lighter\">\r\n                    <p>Cooking time: </p>\r\n                </div>\r\n                <div className=\"bar full-screen-only\">\r\n                    <p>Vegetarian: </p>\r\n                </div>\r\n                <div className=\"bar lighter full-screen-only\">\r\n                    <p>Favourites: </p>\r\n                </div>\r\n                <div className=\"bar full-screen-only\">\r\n                    <p>Clicks: </p>\r\n                </div>\r\n                <div className=\"bar lighter full-screen-only\">\r\n                    <p>Added: </p>\r\n                </div>\r\n                <div className=\"bar full-screen-only\">\r\n                    <p>Adding user: </p>\r\n                </div>\r\n                <div className=\"bar lighter-m end-m end-f\"/>\r\n            </section>\r\n            {videos && videos.map((video: Video) => <VideoEntry key={video.id} video={video}/>)}\r\n            {(!videos || videos.length === 0) && \r\n                <div className=\"form-background top-margin bottom-margin center-text\">\r\n                    <p className=\"side-margin\">There is no videos here. Take a look elsewhere</p>\r\n                </div>}\r\n        </div>\r\n    )\r\n}","import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { useParams } from 'react-router-dom'\r\nimport { addNotification, removeNotification } from '../../reducers/notificationReducer'\r\nimport { setUser } from '../../reducers/userReducer'\r\nimport userService from '../../services/userService'\r\nimport { AppDispatch, RootState, useAppDispatch } from '../../store'\r\nimport { EntryTable } from '../VideoEntries/entryTable'\r\n\r\nexport const UserPage: React.FC = () => {\r\n    const { userid } = useParams<{ userid: string }>()\r\n    const [addedSelected, setAddedSelected] = useState(true)\r\n\r\n    const dispatch: AppDispatch = useAppDispatch()\r\n    const user = useSelector((state: RootState) => state.users.users[Number(userid)])\r\n\r\n    useEffect(() => {\r\n        const waitDispatch = async() => {\r\n            try {\r\n                const result = await userService.getUser(Number(userid))\r\n                dispatch(setUser(result))\r\n            } catch (e) {\r\n                dispatch(addNotification({message: e.response.data, error: true}))\r\n                setTimeout(() => dispatch(removeNotification()), 2000)\r\n            } \r\n        };\r\n        waitDispatch()\r\n    }, [dispatch, userid])\r\n\r\n    if(!user || (user && !user)) {\r\n        return <div/>\r\n    }\r\n\r\n    if(user) {\r\n        return(\r\n            <div>\r\n                <div className=\"center-text\">\r\n                    <h1>{user.username}'s videos</h1>\r\n                </div>\r\n                <div className=\"radio-button center-text\">\r\n                    <button className={addedSelected ? \"darker start-m start-f darken-hover\" : \"bar start-m start-f darken-hover\"} onClick={() => setAddedSelected(true)}>Added</button>\r\n                    <button className={addedSelected ? \"bar end-m end-f darken-hover\" : \"darker end-m end-f darken-hover\"} onClick={() => setAddedSelected(false)}>Favourites</button>\r\n                </div>\r\n                {addedSelected && \r\n                <div className=\"top-padding\">\r\n                    <EntryTable videos={user.videos} />\r\n                </div>\r\n                }\r\n                {!addedSelected && \r\n                <div className=\"top-padding\">\r\n                    <EntryTable videos={user.favouriteVideos} />\r\n                </div>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n    return <div></div>\r\n}","import axios from \"axios\";\r\nimport { Ingredient, newIngredient, newVideo, Video, VideoQuery } from \"../types\";\r\nimport authenticationHelper from \"../utils/authenticationHelper\";\r\n\r\nconst baseUrl = '/api/videos'\r\n\r\nconst addVideo = async (newVideo: newVideo): Promise<Video> => {\r\n    const res = await axios.post(baseUrl, newVideo, {headers: {Authorization: authenticationHelper.getAuthenticationHeaders().headers.Authorization}})\r\n    return res.data\r\n}\r\n\r\nconst addClick = async (id: Video['id']) => {\r\n    await axios.put(`${baseUrl}/${id}/click`)\r\n}\r\n\r\nconst addFavourite = async (id: Video['id']) => {\r\n    await axios.put(`${baseUrl}/${id}/favourite/add`)\r\n}\r\n\r\nconst removeFavourite = async (id: Video['id']) => {\r\n    await axios.put(`${baseUrl}/${id}/favourite/remove`)\r\n}\r\n\r\nconst addIngredient = async(newIngredients: newIngredient[]): Promise<Ingredient> => {\r\n    const res = await axios.post('/api/ingredients', newIngredients, {headers: {Authorization: authenticationHelper.getAuthenticationHeaders().headers.Authorization}})\r\n    return res.data\r\n}\r\n\r\nconst getVideos = async (parameters: VideoQuery): Promise<Video[]> => {\r\n    const {ids, users, minClicks, maxClicks, minFavourites, maxFavourites, ingredients, videos} = parameters\r\n    const res = await axios.post(`${baseUrl}/get`, {ids, users, minClicks, maxClicks, minFavourites, maxFavourites, ingredients, videos})\r\n    return res.data;\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default {getVideos, addVideo, addIngredient, addClick, addFavourite, removeFavourite}","import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { addNotification, removeNotification } from '../../reducers/notificationReducer'\r\nimport { setVideos } from '../../reducers/videoReducer'\r\nimport videoService from '../../services/videoService'\r\nimport { RootState, useAppDispatch } from '../../store'\r\nimport { VideoQuery } from '../../types'\r\nimport { EntryTable } from '../VideoEntries/entryTable'\r\n\r\ninterface Search {\r\n    field: string,\r\n    search: string,\r\n    id: number\r\n}\r\nexport const SearchPage: React.FC = () => {\r\n    const videos = useSelector((state: RootState) => state.videos.videos)\r\n    const dispatch = useAppDispatch()\r\n\r\n    const [field, setField] = useState('User')\r\n    const [searchList, setSearchList] = useState<Search[]>([])\r\n    const [search, setSearch] = useState('')\r\n\r\n    const showNotification = (message: string, error: boolean) => {\r\n        dispatch(addNotification({message, error}))\r\n        setTimeout(() => dispatch(removeNotification()), 2000)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const waitDispatch = async() => {\r\n            try {\r\n                const result = await videoService.getVideos({})\r\n                dispatch(setVideos(result))\r\n            } catch (e) {\r\n                dispatch(addNotification({message: e.response.data, error: true}))\r\n                setTimeout(() => dispatch(removeNotification()), 2000)\r\n            }\r\n        };\r\n        waitDispatch()\r\n    },[dispatch])\r\n\r\n    const addSearch = () => {\r\n        if(search) {\r\n            const s = {id: Math.random(), field, search}\r\n            if(field === 'User' || field === 'Video' || field === 'Ingredient' || Number.isInteger(Number(search))) {\r\n                setSearchList(searchList.concat(s));\r\n                (document.getElementById(\"search-input\") as HTMLInputElement).value = \"\"\r\n                setSearch('')\r\n            } else {\r\n               showNotification(\"Must be integer\", true)\r\n            }\r\n        } else {\r\n            showNotification(\"Search can't be empty\", true)\r\n        }\r\n    }\r\n\r\n\r\n    const completeSearch = async () => {\r\n        const parameters: VideoQuery = {}\r\n        searchList.forEach((s: Search) => {\r\n            switch(s.field) {\r\n                case 'User':\r\n                    parameters.users = parameters.users ? parameters.users.concat(s.search.toLowerCase()) : parameters.users = [s.search.toLowerCase()]\r\n                    break;\r\n                case 'Video':\r\n                    parameters.videos = parameters.videos ? parameters.videos.concat(`%${s.search.toLowerCase()}%`) : parameters.videos = [`%${s.search.toLowerCase()}%`]\r\n                    break;\r\n                case 'Clicks (min)':\r\n                    parameters.minClicks = Number(s.search)\r\n                    break;\r\n                case 'Clicks (max)':\r\n                    parameters.maxClicks = Number(s.search)\r\n                    break;\r\n                case 'Favourites (min)':\r\n                    parameters.minFavourites = Number(s.search)\r\n                    break;\r\n                case 'Favourites (max)':\r\n                    parameters.maxFavourites = Number(s.search)\r\n                    break;\r\n                case 'Ingredient':\r\n                    parameters.ingredients = parameters.ingredients ? parameters.ingredients.concat(`%${s.search.toLowerCase()}%`) : parameters.ingredients = [`%${s.search.toLowerCase()}%`]\r\n                    break;\r\n            }\r\n        })\r\n        try {\r\n            const result = await videoService.getVideos(parameters)\r\n            dispatch(setVideos(result))\r\n        } catch (e) {\r\n            showNotification(e.response.data, true)\r\n        }\r\n\r\n    }\r\n\r\n\r\n    return(\r\n        <div>\r\n            <div>\r\n                <div className=\"center-text search-page-grid form-background\">\r\n                    <div className=\"search-module-grid\">\r\n                        <p className=\"top-margin\">Search:</p>\r\n                        <div className=\"search-bar-grid\">\r\n                            <div className=\"darker open-button start-m start-f vertical\">\r\n                                <select className=\"side-margin transparent\"onChange={({target}) => setField(target.value)}>\r\n                                    <option value='User'>By adding user</option>\r\n                                    <option value='Video'>By video</option>\r\n                                    <option value='Clicks (min)'>By clicks (min)</option>\r\n                                    <option value='Clicks (max)'>By clicks (max)</option>\r\n                                    <option value='Favourites (min)'>By favourites (min)</option>\r\n                                    <option value='Favourites (max)'>By favourites (max)</option>\r\n                                    <option value='Ingredient'>By ingredient</option>\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"darker\">\r\n                                <input className=\"text-input white-text\" placeholder=\"Search...\" id=\"search-input\" onChange={({target}) => setSearch(target.value)}></input>\r\n                            </div>\r\n                            <button className=\"darker end-f end-m open-button vertical\"onClick={() => addSearch()}>Add</button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"inside-background\">\r\n                        <p className=\"bottom-margin\">Current search: </p>\r\n                        {searchList.map((s: Search) => \r\n                            <div key={s.id}>\r\n                                <span>{s.field} = {s.search} </span>\r\n                                <button className=\"remove-button\"onClick={() => setSearchList(searchList.filter((l) => l.id !== s.id))}></button>\r\n                            </div>)}\r\n                    </div>\r\n                    <div>\r\n                        <button type=\"button\" className=\"add-button\" onClick={() => completeSearch()}>Search</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <EntryTable videos={Object.values(videos)}/>\r\n        </div>\r\n    )\r\n}","import React, { useEffect } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { useParams } from 'react-router-dom'\r\nimport { addNotification, removeNotification } from '../../reducers/notificationReducer'\r\nimport { setUser } from '../../reducers/userReducer'\r\nimport { setVideos } from '../../reducers/videoReducer'\r\nimport userService from '../../services/userService'\r\nimport videoService from '../../services/videoService'\r\nimport { RootState, useAppDispatch } from '../../store'\r\nimport { VideoQuery } from '../../types'\r\n\r\nexport const VideoPage: React.FC = () => {\r\n    const dispatch = useAppDispatch()\r\n    const { videoid } = useParams<{ videoid: string }>()\r\n    const video = useSelector((state: RootState) => state.videos.videos[Number(videoid)])\r\n    const loginId = useSelector((state: RootState) => state.login.user?.id)\r\n    const user = useSelector((state: RootState) => state.users.users[loginId || -1])\r\n    \r\n    const isFavourite = user?.favouriteVideos.filter((v) => v.id === Number(videoid)).length > 0\r\n\r\n    const showNotification = (message: string, error: boolean) => {\r\n        dispatch(addNotification({message, error}))\r\n        setTimeout(() => dispatch(removeNotification()), 2000)\r\n    }\r\n    \r\n    useEffect(() => {\r\n        const idQuery: VideoQuery = {\r\n            ids: [Number(videoid)]\r\n        }\r\n        const fetchVideos = async () => {\r\n            const result = await videoService.getVideos(idQuery)\r\n            dispatch(setVideos(result))\r\n        }\r\n        const fetchUser = async() => {\r\n            if(loginId) {\r\n                const result = await userService.getUser(loginId)\r\n                dispatch(setUser(result))\r\n            }\r\n        }\r\n\r\n        try {\r\n            fetchVideos()\r\n                \r\n            if(loginId) {\r\n                fetchUser()\r\n            }\r\n        } catch (e) {\r\n            dispatch(addNotification({message: e.response.data , error: true}))\r\n            setTimeout(() => dispatch(removeNotification()), 2000)\r\n        }\r\n\r\n    }, [dispatch, videoid, loginId])\r\n\r\n    useEffect(() => {\r\n        try {\r\n            videoService.addClick(Number(videoid))\r\n        } catch {\r\n            return\r\n        }\r\n    }, [videoid])\r\n\r\n\r\n    const addToFavourites = async() => {\r\n        if (user && video) { \r\n            const idQuery: VideoQuery = {\r\n                ids: [Number(videoid)]\r\n            }\r\n            try {\r\n                await userService.addFavourite(user.id, video.id)\r\n                const userResult = await userService.getUser(user.id)\r\n                dispatch(setUser(userResult))\r\n                const videoResult = await videoService.getVideos(idQuery)\r\n                dispatch(setVideos(videoResult))\r\n                await videoService.addFavourite(video.id)\r\n                showNotification(\"Video added to favourites!\", false)\r\n            } catch(e) {\r\n                showNotification(e.response.data, true)\r\n            }\r\n        }\r\n    }\r\n\r\n    const removeFromFavourites = async() => {\r\n        if (user && video) { \r\n            const idQuery: VideoQuery = {\r\n                ids: [Number(videoid)]\r\n            }\r\n\r\n            try {\r\n                await userService.removeFavourite(user.id, video.id)\r\n                const userResult = await userService.getUser(user.id)\r\n                dispatch(setUser(userResult))\r\n                const videoResult = await videoService.getVideos(idQuery)\r\n                dispatch(setVideos(videoResult))\r\n                await videoService.removeFavourite(video.id)\r\n                showNotification(\"Video removed from favourites\", false)\r\n            } catch(e) {\r\n                showNotification(e.response.data, true)\r\n            }\r\n        }\r\n    }\r\n\r\n    if(!video) {\r\n        return(\r\n            <div>\r\n                <h1>No video found!</h1>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            <section className=\"form-background center-text top-padding bottom-padding\">\r\n                <div className=\"inside-background\">\r\n                    <div className=\"side-margin\">\r\n                        <div>\r\n                            <h1>{video.videoName}</h1>\r\n                            <p>By: {video.channelName}</p>\r\n                        </div>\r\n                        <div>\r\n                            <a href={video.videoUrl}>{video.videoUrl}</a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"inside-background top-margin\">\r\n                    <div className=\"side-margin\">\r\n                        <div>\r\n                            <h1>Ingredients</h1>\r\n                            <div className=\"top-margin\">\r\n                                {video.ingredients.map((i) => {\r\n                                    return (\r\n                                        <p key={i.id}>{i.quantity}g of {i.produce.produceName}</p>\r\n                                    )\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"top-margin\">\r\n                            <p>Cooking time: {video.timeInMinutes}</p>\r\n                        </div>\r\n                        <div>\r\n                            <p>Calories: {video.ingredients.reduce((memo, i) => memo + (i.produce.caloriesPerGram * i.quantity), 0)} kcal</p>\r\n                        </div>\r\n                        <div>\r\n                            <p>Price: {video.ingredients.reduce((memo, i) => memo + (i.produce.pricePerGram * i.quantity), 0) / 100}â‚¬</p>\r\n                        </div>\r\n                        <div className=\"top-margin\">\r\n                            <p>Recipe is vegetarian: {video.vegetarian ? 'YES' : 'NO'}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"inside-background top-margin\">\r\n                   <p>Added by: {video.username}</p>\r\n                   <p>On {new Date(Number(video.added)).toDateString()}</p>\r\n                </div>\r\n\r\n                <div className=\"top-margin\">\r\n                    {(user && user.id) &&\r\n                        <div>\r\n                            {!isFavourite && <button className=\"add-button\" onClick={() => addToFavourites()}>Add to favourites!</button>}\r\n                            {isFavourite && <button className=\"add-button\" onClick={() => removeFromFavourites()}>Remove from favourites!</button>}\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </section>\r\n        </div>\r\n    )\r\n}","import React, { FormEvent, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { loadUser, logout} from '../../reducers/loginReducer'\r\nimport { addNotification, removeNotification } from '../../reducers/notificationReducer'\r\nimport loginService from '../../services/loginService'\r\nimport { RootState, useAppDispatch } from '../../store'\r\nimport { LoggedInUser } from '../../types'\r\nimport loginStorage from '../../utils/loginStorage'\r\n\r\nexport const LoginBar: React.FC = () => {\r\n    const [username, setUsername] = useState('')\r\n    const [password, setPassword] = useState('')\r\n    const user = useSelector((state: RootState) => state.login.user)\r\n    \r\n    const dispatch = useAppDispatch()\r\n\r\n    const history = useHistory()\r\n\r\n    const useLogout = () => {\r\n        loginStorage.logoutUser()\r\n        dispatch(logout())\r\n        showNotification(\"Logged out!\", false)\r\n    }\r\n\r\n    const showNotification = (message: string, error: boolean) => {\r\n        dispatch(addNotification({message, error}))\r\n        setTimeout(() => dispatch(removeNotification()), 2000)\r\n    }\r\n\r\n    const submitLogin = async (username: string, password: string) => {\r\n        try {\r\n            (document.getElementById('login-username-input') as HTMLInputElement).value = \"\";\r\n            (document.getElementById('login-password-input') as HTMLInputElement).value = \"\";\r\n            const result = await loginService.login(username, password)\r\n            setUsername('')\r\n            setPassword('')\r\n            const logUser = dispatch(loadUser(result))\r\n            if(logUser.payload) {\r\n                loginStorage.saveUser(logUser.payload as LoggedInUser)\r\n            }\r\n            showNotification(`Welcome, ${(logUser.payload as LoggedInUser).username}`, false);\r\n        } catch (e) {\r\n            showNotification(e.response.data, true)\r\n            setUsername('')\r\n            setPassword('')\r\n        }\r\n    }\r\n\r\n    const submit= async (event: FormEvent<HTMLFormElement>) => {\r\n        event.preventDefault()\r\n        await submitLogin(username, password)\r\n    }\r\n\r\n    return(\r\n        <div className=\"login-form\">\r\n            {!user && \r\n                <form onSubmit={submit} className=\"grid-logged-out\">\r\n                    <button className=\"bar start-m start-f bar-button\" type=\"button\" onClick={() => history.push('/search')}>Search videos</button>\r\n                    <div className=\"bar\">\r\n                        <div className=\"login-form\">\r\n                            <p>You are not logged in </p>\r\n                            <input id=\"login-username-input\" className=\"text-input\" placeholder=\"Username\" value={username} onChange={({target}) => setUsername(target.value)} /> \r\n                            <input id=\"login-password-input\" className=\"text-input\" placeholder=\"Password\"type='password' value={password} onChange={({target}) => setPassword(target.value)} />\r\n                            <button className=\"add-button\" type='submit'>Log in</button>\r\n                        </div>\r\n                    </div>\r\n                    <button className=\"bar end-m end-f bar-button\" type='button' onClick={() => history.push('/register')}>Register</button>\r\n                </form>\r\n            }\r\n\r\n            {user &&\r\n                <div className=\"grid-logged-in\">\r\n                    <p className=\"bar start-f full-screen-only\">You are logged in as {user.username}!</p>\r\n                    <button className=\"bar start start-m bar-button\" onClick={() => history.push('/search')}>Search videos</button>\r\n                    <button className=\"bar bar-button\" onClick={() => history.push('/addVideo')}>Add a video</button>\r\n                    <button className=\"bar bar-button\" onClick={() => history.push(`/user/${user.id}`)}>Own page</button>\r\n                    <button className=\"bar end-m end-f bar-button\" type='button' onClick={useLogout}>Log out</button>\r\n                </div>\r\n            }   \r\n\r\n        </div>\r\n    )\r\n}","import axios from 'axios'\r\nimport { newProduce, Produce} from \"../types\"\r\nimport authenticationHelper from '../utils/authenticationHelper'\r\n\r\nconst baseUrl = '/api/produce'\r\n\r\nconst addProduce = async (newProduce: newProduce): Promise<Produce[]> => {\r\n    const res = await axios.post(baseUrl, newProduce,\r\n        {headers: {\r\n          Authorization: authenticationHelper.getAuthenticationHeaders().headers.Authorization\r\n        }})\r\n    return [res.data]\r\n}\r\n\r\nconst getProduce = async (): Promise<Produce[]> => {\r\n    const res = await axios.get(`${baseUrl}/`)\r\n    return res.data;\r\n}\r\n\r\n// eslint-disable-next-line import/no-anonymous-default-export\r\nexport default { addProduce, getProduce }","import React, { useState } from 'react'\r\nimport { addNotification, removeNotification } from '../../reducers/notificationReducer'\r\nimport { setProduce } from '../../reducers/produceReducer'\r\nimport produceService from '../../services/produceService'\r\nimport { useAppDispatch } from '../../store'\r\n\r\nconst AddProduce: React.FC = () => {\r\n    const [name, setName] = useState('')\r\n    const [calories, setCalories] = useState('')\r\n    const [price, setPrice] = useState('')\r\n    \r\n    const dispatch = useAppDispatch()\r\n\r\n    const showNotification = (message: string, error: boolean) => {\r\n        dispatch(addNotification({message, error}))\r\n        setTimeout(() => dispatch(removeNotification()), 2000)\r\n    }\r\n\r\n\r\n    const suitableValues: boolean = \r\n        Boolean(name && \r\n        calories.length > 0 && Number.isFinite(Number(calories)) && Number(calories) > -1 && Number(calories) < 10 &&\r\n        price.length > 0 && Number.isFinite(Number(price)) && Number(price) > -1 && Number(price) < 1000) \r\n\r\n    const submitProduce = async () => {\r\n        if(suitableValues) {\r\n\r\n            try {\r\n                const produce = await produceService.addProduce({produceName: name, caloriesPerGram: Number(calories), pricePerGram: Number(price)})\r\n                dispatch(setProduce(produce))\r\n                setName(\"\")\r\n                setCalories(\"\")\r\n                setPrice(\"\");\r\n                (document.getElementById(\"produce-name-input\") as HTMLInputElement).value = \"\";\r\n                (document.getElementById(\"produce-calories-input\") as HTMLInputElement).value = \"\";\r\n                (document.getElementById(\"produce-price-input\") as HTMLInputElement).value = \"\";\r\n                showNotification(`${name} added!`, false)\r\n            } catch (e) {\r\n                showNotification(e.response.data, true)\r\n            }\r\n\r\n        } else {\r\n            throw new Error(\"Name can't be left empty. Price has to be float. Calories has to be integer.\")\r\n        }\r\n\r\n    }\r\n\r\n    return(\r\n        <div className='add-produce-grid top-padding'>\r\n            <div>\r\n                <p>Produce name:</p>\r\n                <input className=\"text-input half\" id=\"produce-name-input\" onChange={({target}) => (setName(target.value))}></input>\r\n            </div>\r\n            <div>\r\n                <p>Calories (kcal/1g) :</p>\r\n                <input className=\"text-input half\" id=\"produce-calories-input\" type=\"number\" min=\"0\" max=\"9\" onChange={({target}) => (setCalories(target.value))}></input>\r\n            </div>\r\n            <div>\r\n                <p>Price (cent/1g):</p>\r\n                <input className=\"text-input half\" id=\"produce-price-input\" type=\"number\" min=\"0\" max=\"100000\" onChange={({target}) => (setPrice(target.value))}></input>\r\n            </div>\r\n            <div>\r\n                <button className=\"add-button\" type=\"button\" disabled={!suitableValues} onClick={() => submitProduce()}>Add!</button>\r\n            </div>\r\n            <div>\r\n                {!suitableValues &&\r\n                    <p style={{color: 'red'}}>Check that every input is filled with suitable values!</p>}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AddProduce","import React, { FormEvent, useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { useHistory } from 'react-router-dom'\r\nimport { addNotification, removeNotification } from '../../reducers/notificationReducer'\r\nimport { setProduce } from '../../reducers/produceReducer'\r\nimport produceService from '../../services/produceService'\r\nimport videoService from '../../services/videoService'\r\nimport { RootState, useAppDispatch } from '../../store'\r\nimport { newIngredient, newVideo, Video } from '../../types'\r\nimport AddProduce from '../AddProduce'\r\n\r\nconst AddVideoPage: React.FC = () => {\r\n    const [openAdd, setOpenAdd] = useState(false)\r\n    const [link, setLink] = useState('')\r\n    const [linkError, setLinkError] = useState(false)\r\n    const [time, setTime] = useState('')\r\n    const [search, setSearch] = useState('')\r\n    const [grams, setGrams] = useState('')\r\n    const [ingredients, setIngredients] = useState<{id: number, produceId: number, produceName: string, quantity: number}[]>([])\r\n    const [minutesError, setMinutesError] = useState(false)\r\n    const [gramsError, setGramsError] = useState(false)\r\n    const [vegetarian, setVegetarian] = useState(false)\r\n    const [ingPro, setIngPro] = useState<number|undefined>(undefined)\r\n\r\n    const produce = useSelector((state: RootState) => state.produce.produce)\r\n    const user = useSelector((state: RootState) => state.login.user)\r\n\r\n    const history = useHistory()\r\n    const dispatch = useAppDispatch()\r\n\r\n    const showNotification = (message: string, error: boolean) => {\r\n        dispatch(addNotification({message, error}))\r\n        setTimeout(() => dispatch(removeNotification()), 2000)\r\n    }\r\n\r\n    useEffect(() => {\r\n        const waitForDispatch = async() => {\r\n            try {\r\n                const result = await produceService.getProduce()\r\n                dispatch(setProduce(result))\r\n            } catch (e) {\r\n                dispatch(addNotification({message: e.response?.data || e.message, error: true}))\r\n                setTimeout(() => dispatch(removeNotification()), 2000)\r\n            }\r\n        }\r\n\r\n        waitForDispatch()\r\n    }, [dispatch])\r\n\r\n\r\n    useEffect(() => {\r\n        if(!Number.isInteger(Number(grams))) {\r\n            setGramsError(true)\r\n        } else {\r\n            setGramsError(false)\r\n        }\r\n    }, [grams])\r\n\r\n    useEffect(() => {\r\n        if(!Number.isInteger(Number(time))) {\r\n            setMinutesError(true)\r\n        } else {\r\n            setMinutesError(false)\r\n        }\r\n    }, [time])\r\n\r\n    useEffect(() => {\r\n        if(link.startsWith('https://www.youtube.com/watch?v=')) {\r\n            setLinkError(false)\r\n        } else {\r\n            setLinkError(true)\r\n        }\r\n    }, [link])\r\n\r\n    const submitIngredient = () => {\r\n\r\n        if(gramsError || !grams || !ingPro) {\r\n            return\r\n        }\r\n\r\n        const ingredient: {id: number, produceId: number, produceName: string, quantity: number} = {\r\n            produceId: ingPro,\r\n            produceName: produce[ingPro]?.produceName || '',\r\n            quantity: Number(grams),\r\n            id: Math.random()\r\n        }\r\n\r\n        setIngredients(ingredients.concat(ingredient))\r\n        setGrams('');\r\n        (document.getElementById('grams-input') as HTMLInputElement).value = \"\"\r\n    }\r\n\r\n    const submit = async (event: FormEvent<HTMLFormElement>) => {\r\n        event.preventDefault()\r\n\r\n        if(user) {\r\n            try {\r\n                const newVideo: newVideo = {\r\n                    userId: user.id,\r\n                    username: user.username,\r\n                    videoUrl: link,\r\n                    timeInMinutes: Number(time),\r\n                    vegetarian: vegetarian,\r\n                    added: Date.now()\r\n                }\r\n                const video: Video = await videoService.addVideo(newVideo);\r\n                \r\n                const newIngredients: newIngredient[] = ingredients.map((i) => {\r\n                    const ing = {\r\n                        produceId: i.produceId,\r\n                        quantity: i.quantity,\r\n                        videoId: video.id\r\n                    }\r\n                    return ing\r\n                })\r\n\r\n                await videoService.addIngredient(newIngredients)\r\n                showNotification(`${link} added!`, false)\r\n                setVegetarian(false)\r\n                setLink('')\r\n                setTime('')\r\n                setIngredients([]);\r\n                (document.getElementById('time-input') as HTMLInputElement).value = \"\";\r\n                (document.getElementById('link-input') as HTMLInputElement).value = \"\";\r\n                (document.getElementById('veg-input') as HTMLInputElement).checked = false;\r\n                history.push('/search')\r\n            } catch (e) {\r\n                showNotification(e.response.data, true)\r\n            }\r\n        }\r\n    }\r\n\r\n    if(!user || !user.id) {\r\n        return(\r\n            <div className=\"center-text form-background\">\r\n                <h1> Only registered users may add videos. Please login!</h1>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            <form onSubmit={submit} className=\"grid-add-video form-background\">\r\n                <div className=\"top-padding half\">\r\n                    <div>\r\n                        <p>Link to video </p>\r\n                        <span>(must start with </span>\r\n                        <span style={{color: 'red'}}>https://www.youtube.com/watch?v=</span>\r\n                        <span> ): </span>\r\n                    </div>\r\n                    <input className=\"text-input\" id=\"link-input\" onChange={({target}) => (setLink(target.value))}></input>\r\n                </div>\r\n                <div>\r\n                    <span>Cooking time (in minutes): </span>\r\n                    <input className=\"text-input\" id=\"time-input\" type=\"number\" min=\"1\" max=\"100000\" step=\"1\" onChange={({target}) => (setTime(target.value))}></input>\r\n                    {minutesError && <span style={{color: 'red'}}>Must be a integer!</span>}\r\n                </div>\r\n                <div>\r\n                    <p>Recipe is suitable for vegetarians? </p>\r\n                    <input id=\"veg-input\" className=\"checkbox\" type=\"checkbox\" onChange={({target}) => (setVegetarian(target.checked))}></input>\r\n                </div>\r\n                <div>\r\n                    <h1>Ingredients:</h1>\r\n                    {ingredients.map((i) => {\r\n                        return(\r\n                            <div key={i.id} className=\"top-padding\">\r\n                                <span>{i.quantity}g of {i.produceName}</span>\r\n                                <button className=\"remove-button\"onClick={() => setIngredients(ingredients.filter((ing) => ing.id !== i.id))}></button>\r\n                            </div>\r\n                        )\r\n                    })}\r\n                </div>\r\n                <div>\r\n                    <section className=\"ingredient-grid\">\r\n                        <h1>Add ingredient</h1>\r\n                        <div className=\"top-margin\">\r\n                            <input className=\"text-input round-top set-width as-ablock\"onChange={({target}) => (setSearch(target.value))} placeholder='Search for produce...'></input>\r\n                            <select className=\"text-input round-bottom set-width as-abloc\" defaultValue={undefined} onChange={({target}) => (setIngPro(Number(target.value)))}>\r\n                                <option value={undefined}>Choose produce...</option>\r\n                                {Object.values(produce).filter((p) => \r\n                                p.produceName.toLowerCase().includes(search.toLowerCase()) || !search)\r\n                                .sort((a, b) => a.produceName.toLowerCase() <= b.produceName.toLowerCase() ? -1 : 1)\r\n                                .map((p) => {\r\n                                    return(\r\n                                    <option key={p.id} value={p.id}>{p.produceName}</option>\r\n                                    )\r\n                                })}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"top-margin\">\r\n                            <p>How many grams?</p>\r\n                            <input className=\"text-input\" id=\"grams-input\" type=\"number\" min=\"1\" max=\"100000\" step=\"1\" onChange={(({target}) => (setGrams(target.value)))}></input>\r\n                            {gramsError && <p style={{color: 'red'}}>Must be a integer!</p>}\r\n                        </div>\r\n                        <button className=\"add-button top-margin\" type=\"button\" disabled={(gramsError || !grams || !ingPro)} onClick={() => submitIngredient()}> Add ingredient</button>\r\n                    </section>\r\n                </div>\r\n                <div className=\"wider\">\r\n                    <div className=\"button-group\">\r\n                        <div/>\r\n                        <span className=\"darker start-m start-f\">Add produce</span>\r\n                        <button className=\"open-button darker end-m end-f\" type=\"button\" onClick={() => setOpenAdd(!openAdd)}>{openAdd ? '-' : '+'}</button>\r\n                    </div>\r\n                    {openAdd && \r\n                        <AddProduce />\r\n                    }\r\n                </div>\r\n                <div>\r\n                   <button className=\"add-button\" disabled={(!time|| !link || linkError || minutesError)} type=\"submit\">\r\n                       Add video!\r\n                    </button>\r\n                </div>\r\n            </form>\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AddVideoPage","import { useSelector } from \"react-redux\"\r\nimport { RootState } from \"../../store\"\r\n\r\nconst NotificationBar: React.FC = () => {\r\n    const notifications = useSelector((state: RootState) => state.notifications.notifications)\r\n\r\n    return(\r\n        <div>\r\n            {notifications.map((n, index) => {\r\n                return(\r\n                    <div key={index} className={n.error ? 'inside-background error' : 'inside-background success'}>\r\n                        <p>{n.message}</p>\r\n                    </div>\r\n                )\r\n            })}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NotificationBar","import React, { useEffect } from 'react';\nimport { BrowserRouter as Router, Redirect, Route, Switch } from 'react-router-dom'\nimport { RegisterPage } from './components/RegisterPage';\nimport { UserPage } from './components/UserPage';\nimport { SearchPage } from './components/SearchPage';\nimport { VideoPage } from './components/VideoPage';\nimport { LoginBar } from './components/LoginBar';\nimport loginStorage from './utils/loginStorage';\nimport { loadUser } from './reducers/loginReducer';\nimport { useAppDispatch } from './store';\nimport AddVideoPage from './components/AddVideoPage';\nimport NotificationBar from './components/NotificationBar';\n\nfunction App() {\n  const dispatch = useAppDispatch()\n  \n  useEffect(() => {\n    const user = loginStorage.loadUser()\n    if(user) {\n      dispatch(loadUser(user))\n    }\n  })\n\n  return (\n    <div className=\"restrict-width\">\n        <Router>\n          <NotificationBar />\n          <LoginBar />\n          <Switch>\n            <Route path=\"/register\" render={() => <RegisterPage />} />\n            <Route path=\"/user/:userid\" render={() => <UserPage />} />\n            <Route path=\"/search\" render={() => <SearchPage />} />\n            <Route path=\"/video/:videoid\" render={() => <VideoPage />} />\n            <Route path=\"/addVideo\" render={() => <AddVideoPage />} />\n            <Redirect exact from=\"/\" to=\"/search\" />\n          </Switch>\n        </Router>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport \"./index.css\"\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}